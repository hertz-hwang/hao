# 松烟教程(**不建议学习**)

> 二三乱序混编26键前缀码方案（**大码、中码、小码全乱序**）。

「松烟」是纯形、单+简词，最长五码的不定长输入方案，字根为双编码或三编码，**纯形前缀码**方案，完全离开空格键。大集合A区20键「qtypasdfghjklzxcvbnm」，B区6键「weruio」。字根的编码为AB或AAB两种，单字编码方式有B/AB/AAB/AAAB/AAAAB/AAAAA，共计4,042,105编码空间。

## 字根编码
字根存在双、三混合编码，如：

- “一” → Le 为双编码，大码为 `l`，小码为 `e`；
- “土” → Psu 为三编码，大码为 `p`，小码分别为 `s` 和 `u`

> **特别说明：**</br>
> 当首根为三编码时，如：“址”字拆分为“土止”，“土”编码为“Psu”，“止”编码为“Di”，那么“址”编码为“psdi”。

> 「𥫗」pu + 「毛」gye = 「笔」pgye

> 「土」psu + 「止」di = 「址」psdi

> 「立」jsi + 「口」kdi + 「阝」lw = 「部」jsklw

> 「木」tlr + 「八」jdo + 「厶」bkr = 「松」tljbk

> 「宀」gke + 「心」hdu + 「丿」si + 「山」mgi = 「密」gkhsm

> 「亻」jo + 「尸」mfu + 「二」zo + 「又」bu = 「假」jmzbu


## 取码规则
> 定义：

> Aa为首根大码；Ab为首根中码；Ac为首根小码；

> Ba为次根大码；Bb为次根中码；Bc为次根小码；

> Za为末根大码；Zb为末根中码；Zc为末根小码。

- 一根字：字根为双编码时取AaAb **(2键)**；

  字根为三编码时取AaAbAc **(3键)**。

- 二根字：首根为双编码时取AaBaBb **(3键)** 或AaBaBbBc **(4键)**；

  首根为三编码时取AaAbBaBb **(4键)** 或AaAbBaBbBc **(5键)**。

- 三根字：首根为双编码时取AaBaCaCb **(4键)** 或AaBaCaCbCc **(5键)**；

  首根为三编码时取AaAbBaCaCb **(5键)**。

- 四根及以上：首根为双编码时取AaBaCaZaZb **(5键)**；

  首根为三编码时取AaAbBaCaZa **(5键)**。

**总结：拆字后，取前3根+末根，首根为双编码时取大码，首根为三编码时取大码+中码。**

注：上面的字母大小写只是便于区分大码与小码，并不意味着输入为大写字母！


::: details 拆分规则

按优先顺序排列为：
- 结构完整
- 根少优先
- 能连不交
- 能散不连
- 全符笔顺
- 取大优先

必要时，笔画可被剪断如：「果」田木「戢」口耳戈  

:::

## 字根图

![松烟字根图](/data/gen-sy.png)

## 测评数据

### 松烟单字
![松烟单字](/data/dz-sy.png)

本方案全字集（10W字）低重、繁简通打，其关键数据如下：

- 常用字前6000重码数 17
- GBK字集重码数 844
- 全字集动态重码率 0.0154%
- 双手互击率 92.11%
- 全码速度当量 1.177

## 优缺点

本方案为纯形前缀码方案，优缺点都十分突出，故总结如下：

### 缺点

- 字根编码乱序排布，由模拟退火算法计算出最优解。
- 单字最长五码，码长较长，不适合追求极致码长的用户。
- 只专注于单字。
- 简码不是全码的前缀。

### 优点

- 首根信息完整，大字集重码极低。
- 双手互击、击键速度当量、用指分布极佳。
- 专注于单字，无需记忆词语，输入流畅。